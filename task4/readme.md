#三 进程的管道通信

实验简述

编程实现进程的管道通信程序。

使用系统调用pipe()建立一条管道线，两个子进程分别向管道写一句话（写的内容自己定，但要有该进程的一些信息）

父进程从管道中读出来自两个子进程的消息，显示在屏幕上。

要求：父进程首先接收子进程p1发来的消息，然后再接收子进程p2发来的消息。

实验内容

基础点
通过lockf()实现管道的互斥使用，通过wait()实现父子进程的同步。
扩展点
子进程在对管道写入端解锁之前先睡眠若干秒再继续，父进程从管道中读出两次子进程写入的信息并显示。

数据结构及说明
int fd[2]
fp[2]是供进程使用的文件描述符数组，fp[1]用于写，fp[0]用于读。

回答问题：

1.进程间的互斥表现在哪里？

2.进程间的同步表现在哪里？

3.你的程序采用什么方法实现上述关系？

子进程先执行，然后父进程才能够执行。父进程首先创建子进程p1，然后执行子进程p1。在执行子进程p1之后，父进程创建子进程p2，执行子进程p2。之后，父进程执行，程序结束。即先执行子进程，再执行父进程。这是进程的同步机制决定的，因为只有在子进程将信息写入管道后，父进程才能读取。否则，父进程调用wait()系统将自己阻塞，将处理机交给子进程。直到子进程将数据写入管道之后唤醒。

管道互斥控制是为了防止两个子进程对管道资源进行争夺而产生信息丢失或覆盖。如果没有互斥控制，那么可能子进程写入的信息还没有来得及被父进程读出，另外的子进程又写入了新的信息，这样之前子进程写入的信息就被覆盖了，父进程也没有读到上一个子进程传递的信息，这就造成了信息丢失与覆盖。因此，进程之间的互斥表现在以下事实：当子进程写入管道时，另一个想要写入管道的子进程必须等待。

通过lockf()实现管道的互斥使用，通过wait()实现父子进程的同步。
